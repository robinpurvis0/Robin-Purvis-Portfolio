<!-- Code citation: Code was adapted from the provided guide https://github.com/osu-cs340-ecampus/nodejs-starter-app -->
<html>

<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="main.js"></script>
    <title>Users</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
</head>

<body class="text-center">
    <ul class="nav nav-pills">
        <li class="nav-item">
            <a  class="nav-link" href="/games">Games</a>
        </li>
        <li class="nav-item">
            <a class="nav-link active" href="/">Users</a>
        </li>
        <li class="nav-item">
            <a  class="nav-link" href="/reviews">Reviews</a>
        </li>
        <li class="nav-item">
            <a  class="nav-link" href="/genres">Genres</a>
        </li>
        <li class="nav-item">
            <a  class="nav-link" href="/games_genres">Games_Genres</a>
        </li>
        <li class="nav-item">
            <a  class="nav-link" href="/users_games">Users_Games</a>
        </li>
    </ul>

    <div class="container-fluid" style="height:40px;"></div> 
    <div id="browseUsers" class="container-fluid border border-dark " style="max-height: 600px;  overflow:auto; ">
        <table id="user-table" class="table table-bordered table-hover table-sm">
            <thead class="table table-light table-bordered sticky-top">
                <tr>
                    {{#each data.[0]}}
                    <th style="height: 50px; top: 0px;"> {{@key}} </th>
                    {{/each}}
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {{#each data}}
                <tr>
                    <td>{{this.userID}}</td>
                    <td>{{this.userName}}</td>
                    <td>{{this.userEmail}}</td>
                    <td>{{this.userStoreCredit}}</td>
                    <td><button class="btn btn-primary" onclick="deleteUser({{this.userID}})">Delete</button></td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div> <!-- browse -->

<!-- Forms container -->
    <div class="container pt-3">
      <div class="row">
        <div class="col-sm">
          <!-- Add Users form -->
        <h2>Add a New User:</h2>
        <form id="add-user-form" method="POST" action="/add-user-form">
          <label for="userName">username:</label>
          <br />
          <input type="text" required id="userName" name="userName" />
          <br />

          <label for="userEmail">userEmail:</label>
          <br />
          <input type="email" required id="userEmail" name="userEmail" />
          <br />

          <label for="userStoreCredit">userStoreCredit:</label>
          <br />
          <input type="text" required id="userStoreCredit" name="userStoreCredit" />
          <br />

          <br />
          <input type="submit" class="mt-2 mb-5 text-center btn btn-primary btn-sm" onclick="createAlert('Game Created')" value="Add User"/>
        </form>
      </div>
     
    <div class="col-sm">
      <!-- Edit User form -->
      <h2>Edit a User:</h2>
      <strong>(Select an ID to Autofill)</strong>
        <form id="update-user-form-ajax"> 
            <label for="updateUserID">userID:</label>
            <br>
            <select name="updateUserID" id="updateUserID">
                <option value="test" selected="selected">Select a userID:</option>
                {{#each data}}
                <option value="{{userID}}">ID: {{userID}} || Name: {{userName}}</option>
                {{/each}}
            </select>
            <br>
            <label for="updateUserName">userName:</label><br>
            <input type="text" required id="updateUserName" name="updateUserName">
            </br>
            <label for="updateUserEmail">userEmail:</label><br>
            <input type="email" required id="updateUserEmail" name="updateUserEmail">
            </br>

            <label for="updateUserStoreCredit">userStoreCredit:</label>
            <br>
            <input type="text" required id="updateUserStoreCredit" name="updateUserStoreCredit">
            <br>

            <br>
            <input type="submit" required class="mt-2 mb-5 text-center btn btn-primary btn-sm" value="Edit User">
            <br> 
        </form>
        </div>
        </div>
      </div>
    <script src="./js/delete_user.js"></script>
    <script src="./js/update_user.js"></script>
</body>
</html>